<% if current_user.likes.find_by(post: post) %>
  <%= form_with model: [post, current_user.likes.find_by(post: post)], method: :delete, local: true do |f| %>
    <%= f.submit "Unlike" %>
  <% end %>
<% else %>
  <%= form_with model: [post, Like.new], local: true do |f| %>
    <%= f.hidden_field :post_id, value: post.id %>
    <%= f.submit "Like" %>
  <% end %>
<% end %>